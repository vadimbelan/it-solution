{% extends "base.html" %}
{% block title %}–¢–æ–ø-10 —Ü–∏—Ç–∞—Ç{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-lg-8">
      <h4 class="mb-3">–¢–æ–ø-10 –ø–æ –ª–∞–π–∫–∞–º</h4>

      <form method="get" class="row g-2 mb-3">
        <div class="col-md-5">
          <select name="source" class="form-select">
            <option value="">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
            {% for s in sources %}
              <option value="{{ s.id }}" {% if filters.source == s.id|stringformat:"s" %}selected{% endif %}>
                {{ s.name }}{% if s.type %} ({{ s.type }}){% endif %}
              </option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <select name="type" class="form-select">
            <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
            {% for t in types %}
              <option value="{{ t }}" {% if filters.type == t %}selected{% endif %}>{{ t }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-3">
          <button type="submit" class="btn btn-primary w-100">–§–∏–ª—å—Ç—Ä</button>
        </div>
      </form>

      {% if quotes %}
        <div class="list-group">
          {% for q in quotes %}
            <div class="list-group-item">
              <p class="mb-1">{{ q.text }}</p>
              <div class="small text-muted">
                {{ q.source.name }}{% if q.source.type %} ({{ q.source.type }}){% endif %}
                ‚Ä¢ üëç {{ q.likes }} / üëé {{ q.dislikes }} ‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {{ q.views }} ‚Ä¢ –í–µ—Å: {{ q.weight }}
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã.</p>
      {% endif %}
    </div>

    <div class="col-lg-4">
      <h6 class="mb-2">–î–∞—à–±–æ—Ä–¥</h6>
      <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between">
          <span>–¶–∏—Ç–∞—Ç –≤—Å–µ–≥–æ</span><strong>{{ totals.total_quotes|default:0 }}</strong>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>–ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤</span><strong>{{ totals.total_sources|default:0 }}</strong>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>–õ–∞–π–∫–æ–≤</span><strong>{{ totals.total_likes|default:0 }}</strong>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>–î–∏–∑–ª–∞–π–∫–æ–≤</span><strong>{{ totals.total_dislikes|default:0 }}</strong>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span><strong>{{ totals.total_views|default:0 }}</strong>
        </li>
      </ul>
    </div>
  </div>
{% endblock %}
